<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automa√ß√£o WhatsApp - Lanchonete Sabor & Cia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Poppins', sans-serif; 
            box-sizing: border-box;
        }
        .whatsapp-green { background: linear-gradient(135deg, #25D366, #128C7E); }
        .item-card:hover { transform: translateY(-2px); transition: all 0.3s ease; }
        .cart-badge { animation: bounce 0.5s ease-in-out; }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="whatsapp-green text-white p-6 text-center">
        <h1 class="text-2xl font-bold mb-2">üçî Lanchonete Sabor & Cia</h1>
        <p class="text-green-100">Fa√ßa seu pedido pelo WhatsApp</p>
    </div>

    <!-- Carrinho Flutuante -->
    <div id="cartFloat" class="fixed top-4 right-4 z-50 bg-green-500 text-white rounded-full p-3 shadow-lg cursor-pointer hover:bg-green-600 transition-all" onclick="toggleCart()">
        üõí <span id="cartCount" class="cart-badge bg-red-500 text-xs rounded-full px-2 py-1 ml-1">0</span>
    </div>

    <div class="max-w-4xl mx-auto p-4">
        <!-- Card√°pio -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">üìã Nosso Card√°pio</h2>
            <div class="grid md:grid-cols-2 gap-4" id="menu">
                <!-- Itens ser√£o inseridos aqui pelo JavaScript -->
            </div>
        </div>

        <!-- Carrinho -->
        <div id="cartSection" class="bg-white rounded-lg shadow-lg p-6 mb-6 hidden">
            <h3 class="text-xl font-bold text-gray-800 mb-4">üõí Seu Carrinho</h3>
            <div id="cartItems"></div>
            <div class="border-t pt-4 mt-4">
                <div class="flex justify-between items-center text-lg font-bold">
                    <span>Total:</span>
                    <span id="totalPrice" class="text-green-600">R$ 0,00</span>
                </div>
            </div>
        </div>

        <!-- Finaliza√ß√£o -->
        <div id="checkoutSection" class="bg-white rounded-lg shadow-lg p-6 hidden">
            <h3 class="text-xl font-bold text-gray-800 mb-4">üìù Finalizar Pedido</h3>
            
            <form id="orderForm">
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Nome Completo:</label>
                    <input type="text" id="customerName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>

                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Telefone:</label>
                    <input type="tel" id="customerPhone" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="(51) 99999-9999">
                </div>

                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Endere√ßo de Entrega:</label>
                    <textarea id="customerAddress" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" rows="3" placeholder="Rua, n√∫mero, bairro, cidade"></textarea>
                </div>

                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">üí≥ Forma de Pagamento:</label>
                    <select id="paymentMethod" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        <option value="">Selecione a forma de pagamento</option>
                        <option value="Dinheiro">üíµ Dinheiro</option>
                        <option value="Cart√£o de D√©bito">üí≥ Cart√£o de D√©bito</option>
                        <option value="Cart√£o de Cr√©dito">üí≥ Cart√£o de Cr√©dito</option>
                        <option value="PIX">üì± PIX</option>
                    </select>
                </div>

                <div id="changeSection" class="mb-4 hidden">
                    <label class="block text-gray-700 font-medium mb-2">Troco para quanto?</label>
                    <input type="number" id="changeAmount" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="Ex: 50.00" step="0.01">
                </div>

                <div class="mb-6">
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <h4 class="font-medium text-yellow-800 mb-2">‚è∞ Tempo de Entrega Estimado:</h4>
                        <p class="text-yellow-700">45 a 60 minutos</p>
                        <p class="text-sm text-yellow-600 mt-1">*O tempo pode variar conforme a demanda e localiza√ß√£o</p>
                    </div>
                </div>

                <div class="space-y-3">
                    <button type="button" onclick="openWhatsAppWeb()" class="w-full whatsapp-green text-white py-4 rounded-lg font-bold text-lg hover:opacity-90 transition-all flex items-center justify-center gap-3">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.516"/>
                        </svg>
                        Abrir WhatsApp Web
                    </button>
                    
                    <button type="button" onclick="copyWhatsAppLink()" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium transition-all">
                        üìã Copiar Link (Plano B)
                    </button>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="flex items-start gap-3">
                            <div class="text-green-600 text-xl">üí°</div>
                            <div>
                                <h4 class="font-medium text-green-800 mb-1">Como funciona:</h4>
                                <p class="text-sm text-green-700">
                                    O bot√£o verde abre o <strong>WhatsApp Web</strong> diretamente no navegador com sua mensagem pronta. Se n√£o funcionar, use o bot√£o azul para copiar o link.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Card√°pio da lanchonete
        const menuItems = [
            { id: 1, name: "X-Burger Cl√°ssico", price: 18.90, emoji: "üçî", description: "Hamb√∫rguer, queijo, alface, tomate" },
            { id: 2, name: "X-Bacon Especial", price: 22.90, emoji: "ü•ì", description: "Hamb√∫rguer, bacon, queijo, molho especial" },
            { id: 3, name: "X-Frango Grelhado", price: 19.90, emoji: "üêî", description: "Frango grelhado, queijo, alface, maionese" },
            { id: 4, name: "X-Vegetariano", price: 17.90, emoji: "ü•¨", description: "Hamb√∫rguer de soja, queijo, vegetais" },
            { id: 5, name: "Batata Frita Grande", price: 12.90, emoji: "üçü", description: "Por√ß√£o generosa de batatas crocantes" },
            { id: 6, name: "Nuggets (10 unid)", price: 15.90, emoji: "üçó", description: "Nuggets de frango empanados" },
            { id: 7, name: "Refrigerante Lata", price: 4.50, emoji: "ü•§", description: "Coca-Cola, Guaran√°, Fanta (350ml)" },
            { id: 8, name: "Suco Natural", price: 7.90, emoji: "üßÉ", description: "Laranja, lim√£o, maracuj√° (500ml)" },
            { id: 9, name: "Milkshake", price: 12.90, emoji: "ü•§", description: "Chocolate, morango ou baunilha" },
            { id: 10, name: "Sobremesa do Dia", price: 8.90, emoji: "üç∞", description: "Pudim, brigadeir√£o ou mousse" }
        ];

        let cart = [];

        // Renderizar card√°pio
        function renderMenu() {
            const menuContainer = document.getElementById('menu');
            menuContainer.innerHTML = menuItems.map(item => `
                <div class="item-card bg-gray-50 rounded-lg p-4 border hover:shadow-md transition-all">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-2xl">${item.emoji}</span>
                        <span class="text-lg font-bold text-green-600">R$ ${item.price.toFixed(2)}</span>
                    </div>
                    <h4 class="font-semibold text-gray-800 mb-1">${item.name}</h4>
                    <p class="text-sm text-gray-600 mb-3">${item.description}</p>
                    <button onclick="addToCart(${item.id})" class="w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition-all font-medium">
                        Adicionar ao Carrinho
                    </button>
                </div>
            `).join('');
        }

        // Adicionar ao carrinho
        function addToCart(itemId) {
            const item = menuItems.find(i => i.id === itemId);
            const existingItem = cart.find(i => i.id === itemId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...item, quantity: 1 });
            }
            
            updateCartDisplay();
        }

        // Atualizar exibi√ß√£o do carrinho
        function updateCartDisplay() {
            const cartCount = document.getElementById('cartCount');
            const cartItems = document.getElementById('cartItems');
            const totalPrice = document.getElementById('totalPrice');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            cartCount.textContent = totalItems;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-500 text-center py-4">Carrinho vazio</p>';
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="flex items-center justify-between py-2 border-b">
                        <div class="flex items-center">
                            <span class="text-lg mr-2">${item.emoji}</span>
                            <div>
                                <div class="font-medium">${item.name}</div>
                                <div class="text-sm text-gray-600">R$ ${item.price.toFixed(2)} cada</div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <button onclick="updateQuantity(${item.id}, -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600">-</button>
                            <span class="mx-3 font-medium">${item.quantity}</span>
                            <button onclick="updateQuantity(${item.id}, 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600">+</button>
                        </div>
                    </div>
                `).join('');
            }
            
            totalPrice.textContent = `R$ ${total.toFixed(2)}`;
            
            // Mostrar se√ß√£o de checkout se houver itens
            const checkoutSection = document.getElementById('checkoutSection');
            if (cart.length > 0) {
                checkoutSection.classList.remove('hidden');
            } else {
                checkoutSection.classList.add('hidden');
            }
        }

        // Atualizar quantidade
        function updateQuantity(itemId, change) {
            const item = cart.find(i => i.id === itemId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    cart = cart.filter(i => i.id !== itemId);
                }
                updateCartDisplay();
            }
        }

        // Toggle carrinho
        function toggleCart() {
            const cartSection = document.getElementById('cartSection');
            cartSection.classList.toggle('hidden');
        }

        // Mostrar campo de troco
        document.getElementById('paymentMethod').addEventListener('change', function() {
            const changeSection = document.getElementById('changeSection');
            if (this.value === 'Dinheiro') {
                changeSection.classList.remove('hidden');
            } else {
                changeSection.classList.add('hidden');
            }
        });

        // Fun√ß√£o para gerar mensagem do pedido
        function generateOrderMessage() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const address = document.getElementById('customerAddress').value.trim();
            const paymentMethod = document.getElementById('paymentMethod').value;
            const changeAmount = document.getElementById('changeAmount').value;
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            let message = `üçî *NOVO PEDIDO - Lanchonete Sabor & Cia*\n\n`;
            message += `üë§ *Cliente:* ${name}\n`;
            message += `üìû *Telefone:* ${phone}\n`;
            message += `üìç *Endere√ßo:* ${address}\n\n`;
            
            message += `üõí *ITENS DO PEDIDO:*\n`;
            cart.forEach(item => {
                const subtotal = (item.price * item.quantity).toFixed(2);
                message += `${item.emoji} ${item.quantity}x ${item.name} - R$ ${subtotal}\n`;
            });
            
            message += `\nüí∞ *TOTAL: R$ ${total.toFixed(2)}*\n\n`;
            message += `üí≥ *Pagamento:* ${paymentMethod}\n`;
            
            if (paymentMethod === 'Dinheiro' && changeAmount) {
                message += `üíµ *Troco para:* R$ ${parseFloat(changeAmount).toFixed(2)}\n`;
            }
            
            message += `\n‚è∞ *Tempo estimado:* 45-60 minutos\n`;
            message += `\n‚úÖ Pedido confirmado! Obrigado pela prefer√™ncia! üôè`;
            
            return message;
        }

        // Abrir WhatsApp Web - FUN√á√ÉO PRINCIPAL
        function openWhatsAppWeb() {
            // Validar se h√° itens no carrinho
            if (cart.length === 0) {
                alert('Adicione itens ao carrinho primeiro!');
                return;
            }

            // Pegar dados do formul√°rio
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const address = document.getElementById('customerAddress').value.trim();
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            // Validar campos obrigat√≥rios
            if (!name || !phone || !address || !paymentMethod) {
                alert('Por favor, preencha todos os campos obrigat√≥rios!');
                return;
            }
            
            const message = generateOrderMessage();
            const whatsappNumber = "555198200711";
            const encodedMessage = encodeURIComponent(message);
            
            // URL espec√≠fica para WhatsApp Web
            const whatsappWebURL = `https://web.whatsapp.com/send?phone=${whatsappNumber}&text=${encodedMessage}`;
            
            console.log('Abrindo WhatsApp Web:', whatsappWebURL);
            
            // Abrir WhatsApp Web em nova aba
            const newWindow = window.open(whatsappWebURL, '_blank', 'noopener,noreferrer');
            
            if (newWindow) {
                // Limpar carrinho ap√≥s envio
                setTimeout(() => {
                    cart = [];
                    updateCartDisplay();
                    document.getElementById('orderForm').reset();
                }, 1500);
                
                alert('‚úÖ WhatsApp Web aberto!\n\nüì± Se voc√™ n√£o estiver logado, escaneie o QR Code com seu celular.\n\nüí¨ Sua mensagem j√° estar√° pronta para enviar!');
            } else {
                alert('‚ùå N√£o foi poss√≠vel abrir o WhatsApp Web.\n\nTente usar o bot√£o "Copiar Link" ou verifique se o bloqueador de pop-ups est√° ativo.');
            }
        }

        // Fun√ß√£o para copiar link do WhatsApp - SEMPRE FUNCIONA!
        function copyWhatsAppLink() {
            // Validar se h√° itens no carrinho
            if (cart.length === 0) {
                alert('Adicione itens ao carrinho primeiro!');
                return;
            }

            // Pegar dados do formul√°rio
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const address = document.getElementById('customerAddress').value.trim();
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            // Validar campos obrigat√≥rios
            if (!name || !phone || !address || !paymentMethod) {
                alert('Por favor, preencha todos os campos obrigat√≥rios!');
                return;
            }
            
            const message = generateOrderMessage();
            const whatsappNumber = "555198200711";
            const encodedMessage = encodeURIComponent(message);
            const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
            
            // Copiar para √°rea de transfer√™ncia
            if (navigator.clipboard) {
                navigator.clipboard.writeText(whatsappURL).then(() => {
                    alert('‚úÖ Link copiado com sucesso!\n\nüìã Cole no navegador para abrir o WhatsApp\n\nüí° Ou compartilhe este link com o cliente');
                    
                    // Limpar carrinho
                    cart = [];
                    updateCartDisplay();
                    document.getElementById('orderForm').reset();
                    
                }).catch(() => {
                    fallbackCopy(whatsappURL);
                });
            } else {
                fallbackCopy(whatsappURL);
            }
        }

        // Fun√ß√£o de fallback para copiar (navegadores antigos)
        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                alert('‚úÖ Link copiado com sucesso!\n\nüìã Cole no navegador para abrir o WhatsApp');
                
                // Limpar carrinho
                cart = [];
                updateCartDisplay();
                document.getElementById('orderForm').reset();
                
            } catch (err) {
                alert('‚ùå N√£o foi poss√≠vel copiar automaticamente.\n\nLink do WhatsApp:\n' + text);
            }
            
            document.body.removeChild(textArea);
        }

        // Inicializar p√°gina
        renderMenu();
        updateCartDisplay();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'984613637086fbae',t:'MTc1ODc1NjY5MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
